From 761fd9824c17b0516dc9ec4f47f8a9dad1a655d0 Mon Sep 17 00:00:00 2001
From: Jan Palus <atler@pld-linux.org>
Date: Sat, 16 Jan 2021 12:42:21 +0100
Subject: [PATCH] doc: don't build headless man page if headless is disabled

---
 doc/cs/CMakeLists.txt | 28 +++++++++++++++-------------
 doc/de/CMakeLists.txt | 28 +++++++++++++++-------------
 doc/en/CMakeLists.txt | 28 +++++++++++++++-------------
 doc/fr/CMakeLists.txt | 28 +++++++++++++++-------------
 doc/it/CMakeLists.txt | 28 +++++++++++++++-------------
 doc/ja/CMakeLists.txt | 28 +++++++++++++++-------------
 doc/pl/CMakeLists.txt | 28 +++++++++++++++-------------
 doc/ru/CMakeLists.txt | 28 +++++++++++++++-------------
 8 files changed, 120 insertions(+), 104 deletions(-)

diff --git a/doc/cs/CMakeLists.txt b/doc/cs/CMakeLists.txt
index 76aeb87a2..53b409b06 100644
--- a/doc/cs/CMakeLists.txt
+++ b/doc/cs/CMakeLists.txt
@@ -32,19 +32,21 @@ if(ENABLE_MAN)
   add_custom_target(doc-man-weechat-cs ALL DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/weechat.1)
   install(FILES ${CMAKE_CURRENT_BINARY_DIR}/weechat.1 DESTINATION ${MANDIR}/cs/man1)
 
-  # man page: weechat-headless
-  add_custom_command(
-    OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1
-    COMMAND ${ASCIIDOCTOR_EXECUTABLE} ARGS ${ASCIIDOCTOR_ARGS} -b manpage -o weechat-headless.1 ${CMAKE_CURRENT_SOURCE_DIR}/weechat-headless.1.cs.adoc
-    DEPENDS
-    ${CMAKE_CURRENT_SOURCE_DIR}/weechat-headless.1.cs.adoc
-    ${CMAKE_CURRENT_SOURCE_DIR}/includes/cmdline_options.cs.adoc
-    ${CMAKE_CURRENT_SOURCE_DIR}/includes/man.cs.adoc
-    WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
-    COMMENT "Building weechat-headless.1 (cs)"
-  )
-  add_custom_target(doc-man-weechat-headless-cs ALL DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1)
-  install(FILES ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1 DESTINATION ${MANDIR}/cs/man1)
+  if(ENABLE_HEADLESS)
+    # man page: weechat-headless
+    add_custom_command(
+      OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1
+      COMMAND ${ASCIIDOCTOR_EXECUTABLE} ARGS ${ASCIIDOCTOR_ARGS} -b manpage -o weechat-headless.1 ${CMAKE_CURRENT_SOURCE_DIR}/weechat-headless.1.cs.adoc
+      DEPENDS
+      ${CMAKE_CURRENT_SOURCE_DIR}/weechat-headless.1.cs.adoc
+      ${CMAKE_CURRENT_SOURCE_DIR}/includes/cmdline_options.cs.adoc
+      ${CMAKE_CURRENT_SOURCE_DIR}/includes/man.cs.adoc
+      WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
+      COMMENT "Building weechat-headless.1 (cs)"
+    )
+    add_custom_target(doc-man-weechat-headless-cs ALL DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1)
+    install(FILES ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1 DESTINATION ${MANDIR}/cs/man1)
+  endif()
 endif()
 
 if(ENABLE_DOC)
diff --git a/doc/de/CMakeLists.txt b/doc/de/CMakeLists.txt
index 74dbaa2d5..7b3212df6 100644
--- a/doc/de/CMakeLists.txt
+++ b/doc/de/CMakeLists.txt
@@ -32,19 +32,21 @@ if(ENABLE_MAN)
   add_custom_target(doc-man-weechat-de ALL DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/weechat.1)
   install(FILES ${CMAKE_CURRENT_BINARY_DIR}/weechat.1 DESTINATION ${MANDIR}/de/man1)
 
-  # man page: weechat-headless
-  add_custom_command(
-    OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1
-    COMMAND ${ASCIIDOCTOR_EXECUTABLE} ARGS ${ASCIIDOCTOR_ARGS} -b manpage -o weechat-headless.1 ${CMAKE_CURRENT_SOURCE_DIR}/weechat-headless.1.de.adoc
-    DEPENDS
-    ${CMAKE_CURRENT_SOURCE_DIR}/weechat-headless.1.de.adoc
-    ${CMAKE_CURRENT_SOURCE_DIR}/includes/cmdline_options.de.adoc
-    ${CMAKE_CURRENT_SOURCE_DIR}/includes/man.de.adoc
-    WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
-    COMMENT "Building weechat-headless.1 (de)"
-  )
-  add_custom_target(doc-man-weechat-headless-de ALL DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1)
-  install(FILES ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1 DESTINATION ${MANDIR}/de/man1)
+  if(ENABLE_HEADLESS)
+    # man page: weechat-headless
+    add_custom_command(
+      OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1
+      COMMAND ${ASCIIDOCTOR_EXECUTABLE} ARGS ${ASCIIDOCTOR_ARGS} -b manpage -o weechat-headless.1 ${CMAKE_CURRENT_SOURCE_DIR}/weechat-headless.1.de.adoc
+      DEPENDS
+      ${CMAKE_CURRENT_SOURCE_DIR}/weechat-headless.1.de.adoc
+      ${CMAKE_CURRENT_SOURCE_DIR}/includes/cmdline_options.de.adoc
+      ${CMAKE_CURRENT_SOURCE_DIR}/includes/man.de.adoc
+      WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
+      COMMENT "Building weechat-headless.1 (de)"
+    )
+    add_custom_target(doc-man-weechat-headless-de ALL DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1)
+    install(FILES ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1 DESTINATION ${MANDIR}/de/man1)
+  endif()
 endif()
 
 if(ENABLE_DOC)
diff --git a/doc/en/CMakeLists.txt b/doc/en/CMakeLists.txt
index 9cbc93f3f..5300ffb2c 100644
--- a/doc/en/CMakeLists.txt
+++ b/doc/en/CMakeLists.txt
@@ -32,19 +32,21 @@ if(ENABLE_MAN)
   add_custom_target(doc-man-weechat-en ALL DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/weechat.1)
   install(FILES ${CMAKE_CURRENT_BINARY_DIR}/weechat.1 DESTINATION ${MANDIR}/man1)
 
-  # man page: weechat-headless
-  add_custom_command(
-    OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1
-    COMMAND ${ASCIIDOCTOR_EXECUTABLE} ARGS ${ASCIIDOCTOR_ARGS} -b manpage -o weechat-headless.1 ${CMAKE_CURRENT_SOURCE_DIR}/weechat-headless.1.en.adoc
-    DEPENDS
-    ${CMAKE_CURRENT_SOURCE_DIR}/weechat-headless.1.en.adoc
-    ${CMAKE_CURRENT_SOURCE_DIR}/includes/cmdline_options.en.adoc
-    ${CMAKE_CURRENT_SOURCE_DIR}/includes/man.en.adoc
-    WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
-    COMMENT "Building weechat-headless.1 (en)"
-  )
-  add_custom_target(doc-man-weechat-headless-en ALL DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1)
-  install(FILES ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1 DESTINATION ${MANDIR}/man1)
+  if(ENABLE_HEADLESS)
+    # man page: weechat-headless
+    add_custom_command(
+      OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1
+      COMMAND ${ASCIIDOCTOR_EXECUTABLE} ARGS ${ASCIIDOCTOR_ARGS} -b manpage -o weechat-headless.1 ${CMAKE_CURRENT_SOURCE_DIR}/weechat-headless.1.en.adoc
+      DEPENDS
+      ${CMAKE_CURRENT_SOURCE_DIR}/weechat-headless.1.en.adoc
+      ${CMAKE_CURRENT_SOURCE_DIR}/includes/cmdline_options.en.adoc
+      ${CMAKE_CURRENT_SOURCE_DIR}/includes/man.en.adoc
+      WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
+      COMMENT "Building weechat-headless.1 (en)"
+    )
+    add_custom_target(doc-man-weechat-headless-en ALL DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1)
+    install(FILES ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1 DESTINATION ${MANDIR}/man1)
+  endif()
 endif()
 
 if(ENABLE_DOC)
diff --git a/doc/fr/CMakeLists.txt b/doc/fr/CMakeLists.txt
index ec1f47578..635376382 100644
--- a/doc/fr/CMakeLists.txt
+++ b/doc/fr/CMakeLists.txt
@@ -32,19 +32,21 @@ if(ENABLE_MAN)
   add_custom_target(doc-man-weechat-fr ALL DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/weechat.1)
   install(FILES ${CMAKE_CURRENT_BINARY_DIR}/weechat.1 DESTINATION ${MANDIR}/fr/man1)
 
-  # man page: weechat-headless
-  add_custom_command(
-    OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1
-    COMMAND ${ASCIIDOCTOR_EXECUTABLE} ARGS ${ASCIIDOCTOR_ARGS} -b manpage -o weechat-headless.1 ${CMAKE_CURRENT_SOURCE_DIR}/weechat-headless.1.fr.adoc
-    DEPENDS
-    ${CMAKE_CURRENT_SOURCE_DIR}/weechat-headless.1.fr.adoc
-    ${CMAKE_CURRENT_SOURCE_DIR}/includes/cmdline_options.fr.adoc
-    ${CMAKE_CURRENT_SOURCE_DIR}/includes/man.fr.adoc
-    WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
-    COMMENT "Building weechat-headless.1 (fr)"
-  )
-  add_custom_target(doc-man-weechat-headless-fr ALL DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1)
-  install(FILES ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1 DESTINATION ${MANDIR}/fr/man1)
+  if(ENABLE_HEADLESS)
+    # man page: weechat-headless
+    add_custom_command(
+      OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1
+      COMMAND ${ASCIIDOCTOR_EXECUTABLE} ARGS ${ASCIIDOCTOR_ARGS} -b manpage -o weechat-headless.1 ${CMAKE_CURRENT_SOURCE_DIR}/weechat-headless.1.fr.adoc
+      DEPENDS
+      ${CMAKE_CURRENT_SOURCE_DIR}/weechat-headless.1.fr.adoc
+      ${CMAKE_CURRENT_SOURCE_DIR}/includes/cmdline_options.fr.adoc
+      ${CMAKE_CURRENT_SOURCE_DIR}/includes/man.fr.adoc
+      WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
+      COMMENT "Building weechat-headless.1 (fr)"
+    )
+    add_custom_target(doc-man-weechat-headless-fr ALL DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1)
+    install(FILES ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1 DESTINATION ${MANDIR}/fr/man1)
+  endif()
 endif()
 
 if(ENABLE_DOC)
diff --git a/doc/it/CMakeLists.txt b/doc/it/CMakeLists.txt
index 081e5d194..27ce9abbe 100644
--- a/doc/it/CMakeLists.txt
+++ b/doc/it/CMakeLists.txt
@@ -32,19 +32,21 @@ if(ENABLE_MAN)
   add_custom_target(doc-man-weechat-it ALL DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/weechat.1)
   install(FILES ${CMAKE_CURRENT_BINARY_DIR}/weechat.1 DESTINATION ${MANDIR}/it/man1)
 
-  # man page: weechat-headless
-  add_custom_command(
-    OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1
-    COMMAND ${ASCIIDOCTOR_EXECUTABLE} ARGS ${ASCIIDOCTOR_ARGS} -b manpage -o weechat-headless.1 ${CMAKE_CURRENT_SOURCE_DIR}/weechat-headless.1.it.adoc
-    DEPENDS
-    ${CMAKE_CURRENT_SOURCE_DIR}/weechat-headless.1.it.adoc
-    ${CMAKE_CURRENT_SOURCE_DIR}/includes/cmdline_options.it.adoc
-    ${CMAKE_CURRENT_SOURCE_DIR}/includes/man.it.adoc
-    WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
-    COMMENT "Building weechat-headless.1 (it)"
-  )
-  add_custom_target(doc-man-weechat-headless-it ALL DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1)
-  install(FILES ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1 DESTINATION ${MANDIR}/it/man1)
+  if(ENABLE_HEADLESS)
+    # man page: weechat-headless
+    add_custom_command(
+      OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1
+      COMMAND ${ASCIIDOCTOR_EXECUTABLE} ARGS ${ASCIIDOCTOR_ARGS} -b manpage -o weechat-headless.1 ${CMAKE_CURRENT_SOURCE_DIR}/weechat-headless.1.it.adoc
+      DEPENDS
+      ${CMAKE_CURRENT_SOURCE_DIR}/weechat-headless.1.it.adoc
+      ${CMAKE_CURRENT_SOURCE_DIR}/includes/cmdline_options.it.adoc
+      ${CMAKE_CURRENT_SOURCE_DIR}/includes/man.it.adoc
+      WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
+      COMMENT "Building weechat-headless.1 (it)"
+    )
+    add_custom_target(doc-man-weechat-headless-it ALL DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1)
+    install(FILES ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1 DESTINATION ${MANDIR}/it/man1)
+  endif()
 endif()
 
 if(ENABLE_DOC)
diff --git a/doc/ja/CMakeLists.txt b/doc/ja/CMakeLists.txt
index 670b0079f..c5700fcf5 100644
--- a/doc/ja/CMakeLists.txt
+++ b/doc/ja/CMakeLists.txt
@@ -32,19 +32,21 @@ if(ENABLE_MAN)
   add_custom_target(doc-man-weechat-ja ALL DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/weechat.1)
   install(FILES ${CMAKE_CURRENT_BINARY_DIR}/weechat.1 DESTINATION ${MANDIR}/ja/man1)
 
-  # man page: weechat-headless
-  add_custom_command(
-    OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1
-    COMMAND ${ASCIIDOCTOR_EXECUTABLE} ARGS ${ASCIIDOCTOR_ARGS} -b manpage -o weechat-headless.1 ${CMAKE_CURRENT_SOURCE_DIR}/weechat-headless.1.ja.adoc
-    DEPENDS
-    ${CMAKE_CURRENT_SOURCE_DIR}/weechat-headless.1.ja.adoc
-    ${CMAKE_CURRENT_SOURCE_DIR}/includes/cmdline_options.ja.adoc
-    ${CMAKE_CURRENT_SOURCE_DIR}/includes/man.ja.adoc
-    WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
-    COMMENT "Building weechat-headless.1 (ja)"
-  )
-  add_custom_target(doc-man-weechat-headless-ja ALL DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1)
-  install(FILES ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1 DESTINATION ${MANDIR}/ja/man1)
+  if(ENABLE_HEADLESS)
+    # man page: weechat-headless
+    add_custom_command(
+      OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1
+      COMMAND ${ASCIIDOCTOR_EXECUTABLE} ARGS ${ASCIIDOCTOR_ARGS} -b manpage -o weechat-headless.1 ${CMAKE_CURRENT_SOURCE_DIR}/weechat-headless.1.ja.adoc
+      DEPENDS
+      ${CMAKE_CURRENT_SOURCE_DIR}/weechat-headless.1.ja.adoc
+      ${CMAKE_CURRENT_SOURCE_DIR}/includes/cmdline_options.ja.adoc
+      ${CMAKE_CURRENT_SOURCE_DIR}/includes/man.ja.adoc
+      WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
+      COMMENT "Building weechat-headless.1 (ja)"
+    )
+    add_custom_target(doc-man-weechat-headless-ja ALL DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1)
+    install(FILES ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1 DESTINATION ${MANDIR}/ja/man1)
+  endif()
 endif()
 
 if(ENABLE_DOC)
diff --git a/doc/pl/CMakeLists.txt b/doc/pl/CMakeLists.txt
index 1c0586577..bcb548231 100644
--- a/doc/pl/CMakeLists.txt
+++ b/doc/pl/CMakeLists.txt
@@ -32,19 +32,21 @@ if(ENABLE_MAN)
   add_custom_target(doc-man-weechat-pl ALL DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/weechat.1)
   install(FILES ${CMAKE_CURRENT_BINARY_DIR}/weechat.1 DESTINATION ${MANDIR}/pl/man1)
 
-  # man page: weechat-headless
-  add_custom_command(
-    OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1
-    COMMAND ${ASCIIDOCTOR_EXECUTABLE} ARGS ${ASCIIDOCTOR_ARGS} -b manpage -o weechat-headless.1 ${CMAKE_CURRENT_SOURCE_DIR}/weechat-headless.1.pl.adoc
-    DEPENDS
-    ${CMAKE_CURRENT_SOURCE_DIR}/weechat-headless.1.pl.adoc
-    ${CMAKE_CURRENT_SOURCE_DIR}/includes/cmdline_options.pl.adoc
-    ${CMAKE_CURRENT_SOURCE_DIR}/includes/man.pl.adoc
-    WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
-    COMMENT "Building weechat-headless.1 (pl)"
-  )
-  add_custom_target(doc-man-weechat-headless-pl ALL DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1)
-  install(FILES ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1 DESTINATION ${MANDIR}/pl/man1)
+  if(ENABLE_HEADLESS)
+    # man page: weechat-headless
+    add_custom_command(
+      OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1
+      COMMAND ${ASCIIDOCTOR_EXECUTABLE} ARGS ${ASCIIDOCTOR_ARGS} -b manpage -o weechat-headless.1 ${CMAKE_CURRENT_SOURCE_DIR}/weechat-headless.1.pl.adoc
+      DEPENDS
+      ${CMAKE_CURRENT_SOURCE_DIR}/weechat-headless.1.pl.adoc
+      ${CMAKE_CURRENT_SOURCE_DIR}/includes/cmdline_options.pl.adoc
+      ${CMAKE_CURRENT_SOURCE_DIR}/includes/man.pl.adoc
+      WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
+      COMMENT "Building weechat-headless.1 (pl)"
+    )
+    add_custom_target(doc-man-weechat-headless-pl ALL DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1)
+    install(FILES ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1 DESTINATION ${MANDIR}/pl/man1)
+  endif()
 endif()
 
 if(ENABLE_DOC)
diff --git a/doc/ru/CMakeLists.txt b/doc/ru/CMakeLists.txt
index 9e64a20af..e40857982 100644
--- a/doc/ru/CMakeLists.txt
+++ b/doc/ru/CMakeLists.txt
@@ -32,19 +32,21 @@ if(ENABLE_MAN)
   add_custom_target(doc-man-weechat-ru ALL DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/weechat.1)
   install(FILES ${CMAKE_CURRENT_BINARY_DIR}/weechat.1 DESTINATION ${MANDIR}/ru/man1)
 
-  # man page: weechat-headless
-  add_custom_command(
-    OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1
-    COMMAND ${ASCIIDOCTOR_EXECUTABLE} ARGS ${ASCIIDOCTOR_ARGS} -b manpage -o weechat-headless.1 ${CMAKE_CURRENT_SOURCE_DIR}/weechat-headless.1.ru.adoc
-    DEPENDS
-    ${CMAKE_CURRENT_SOURCE_DIR}/weechat-headless.1.ru.adoc
-    ${CMAKE_CURRENT_SOURCE_DIR}/includes/cmdline_options.ru.adoc
-    ${CMAKE_CURRENT_SOURCE_DIR}/includes/man.ru.adoc
-    WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
-    COMMENT "Building weechat-headless.1 (ru)"
-  )
-  add_custom_target(doc-man-weechat-headless-ru ALL DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1)
-  install(FILES ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1 DESTINATION ${MANDIR}/ru/man1)
+  if(ENABLE_HEADLESS)
+    # man page: weechat-headless
+    add_custom_command(
+      OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1
+      COMMAND ${ASCIIDOCTOR_EXECUTABLE} ARGS ${ASCIIDOCTOR_ARGS} -b manpage -o weechat-headless.1 ${CMAKE_CURRENT_SOURCE_DIR}/weechat-headless.1.ru.adoc
+      DEPENDS
+      ${CMAKE_CURRENT_SOURCE_DIR}/weechat-headless.1.ru.adoc
+      ${CMAKE_CURRENT_SOURCE_DIR}/includes/cmdline_options.ru.adoc
+      ${CMAKE_CURRENT_SOURCE_DIR}/includes/man.ru.adoc
+      WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
+      COMMENT "Building weechat-headless.1 (ru)"
+    )
+    add_custom_target(doc-man-weechat-headless-ru ALL DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1)
+    install(FILES ${CMAKE_CURRENT_BINARY_DIR}/weechat-headless.1 DESTINATION ${MANDIR}/ru/man1)
+  endif()
 endif()
 
 if(ENABLE_DOC)
-- 
2.30.0

